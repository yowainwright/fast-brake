// Auto-generated from MDN Browser Compat Data
// Do not edit manually

export const ES_VERSIONS = [
  "es5",
  "es2015",
  "es2016",
  "es2017",
  "es2018",
  "es2019",
  "es2020",
  "es2021",
  "es2022"
];

export const FEATURE_PATTERNS = {};

export const FEATURES_BY_VERSION = {
  "es5": [
    {
      "name": "javascript.statements.async_function",
      "pattern": null
    },
    {
      "name": "javascript.statements.block",
      "pattern": null
    },
    {
      "name": "javascript.statements.break",
      "pattern": null
    },
    {
      "name": "javascript.statements.class",
      "pattern": null
    },
    {
      "name": "javascript.statements.const",
      "pattern": null
    },
    {
      "name": "javascript.statements.continue",
      "pattern": null
    },
    {
      "name": "javascript.statements.debugger",
      "pattern": null
    },
    {
      "name": "javascript.statements.do_while",
      "pattern": null
    },
    {
      "name": "javascript.statements.empty",
      "pattern": null
    },
    {
      "name": "javascript.statements.for",
      "pattern": null
    },
    {
      "name": "javascript.statements.for_in",
      "pattern": null
    },
    {
      "name": "javascript.statements.for_of",
      "pattern": null
    },
    {
      "name": "javascript.statements.for_of.async_iterators",
      "pattern": null
    },
    {
      "name": "javascript.statements.for_of.closing_iterators",
      "pattern": null
    },
    {
      "name": "javascript.statements.function",
      "pattern": null
    },
    {
      "name": "javascript.statements.function.trailing_comma_in_parameters",
      "pattern": null
    },
    {
      "name": "javascript.statements.generator_function",
      "pattern": null
    },
    {
      "name": "javascript.statements.generator_function.IteratorResult_object",
      "pattern": null
    },
    {
      "name": "javascript.statements.generator_function.not_constructable_with_new",
      "pattern": null
    },
    {
      "name": "javascript.statements.generator_function.trailing_comma_in_parameters",
      "pattern": null
    },
    {
      "name": "javascript.statements.if_else",
      "pattern": null
    },
    {
      "name": "javascript.statements.label",
      "pattern": null
    },
    {
      "name": "javascript.statements.let",
      "pattern": null
    },
    {
      "name": "javascript.statements.return",
      "pattern": null
    },
    {
      "name": "javascript.statements.switch",
      "pattern": null
    },
    {
      "name": "javascript.statements.throw",
      "pattern": null
    },
    {
      "name": "javascript.statements.try_catch",
      "pattern": null
    },
    {
      "name": "javascript.statements.var",
      "pattern": null
    },
    {
      "name": "javascript.statements.while",
      "pattern": null
    },
    {
      "name": "javascript.statements.with",
      "pattern": null
    },
    {
      "name": "javascript.grammar.array_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.binary_numeric_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.boolean_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.decimal_numeric_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.hexadecimal_escape_sequences",
      "pattern": null
    },
    {
      "name": "javascript.grammar.hexadecimal_numeric_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.null_literal",
      "pattern": null
    },
    {
      "name": "javascript.grammar.octal_numeric_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.regular_expression_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.string_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.unicode_escape_sequences",
      "pattern": null
    },
    {
      "name": "javascript.grammar.unicode_point_escapes",
      "pattern": null
    },
    {
      "name": "javascript.grammar.shorthand_object_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.template_literals",
      "pattern": null
    },
    {
      "name": "javascript.grammar.trailing_commas",
      "pattern": null
    },
    {
      "name": "javascript.grammar.trailing_commas.trailing_commas_in_functions",
      "pattern": null
    },
    {
      "name": "javascript.grammar.trailing_commas.trailing_commas_in_object_literals",
      "pattern": null
    }
  ],
  "es2017": [
    {
      "name": "javascript.statements.async_generator_function",
      "pattern": null
    },
    {
      "name": "javascript.statements.for_await_of",
      "pattern": null
    },
    {
      "name": "javascript.statements.try_catch.optional_catch_binding",
      "pattern": null
    },
    {
      "name": "javascript.grammar.template_literals.template_literal_revision",
      "pattern": null
    }
  ],
  "es2022": [
    {
      "name": "javascript.statements.await_using",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_attributes",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_attributes.type_css",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_attributes.type_json",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.worklet_support",
      "pattern": null
    },
    {
      "name": "javascript.statements.using",
      "pattern": null
    }
  ],
  "es2016": [
    {
      "name": "javascript.statements.export",
      "pattern": null
    },
    {
      "name": "javascript.statements.export.default",
      "pattern": null
    },
    {
      "name": "javascript.statements.import",
      "pattern": null
    }
  ],
  "es2021": [
    {
      "name": "javascript.statements.export.arbitrary_module_namespace_identifier_names",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.arbitrary_module_namespace_identifier_names",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_assertions",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_assertions.type_css",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.import_assertions.type_json",
      "pattern": null
    },
    {
      "name": "javascript.statements.import.service_worker_support",
      "pattern": null
    },
    {
      "name": "javascript.grammar.trailing_commas.trailing_commas_in_dynamic_import",
      "pattern": null
    }
  ],
  "es2018": [
    {
      "name": "javascript.statements.export.namespace",
      "pattern": null
    }
  ],
  "es2020": [
    {
      "name": "javascript.statements.import.worker_support",
      "pattern": null
    }
  ],
  "es2019": [
    {
      "name": "javascript.grammar.hashbang_comments",
      "pattern": null
    },
    {
      "name": "javascript.grammar.numeric_separators",
      "pattern": null
    }
  ]
};

// Compile patterns at module load time
export const COMPILED_PATTERNS = {};
for (const [version, pattern] of Object.entries(FEATURE_PATTERNS)) {
  if (pattern) {
    COMPILED_PATTERNS[version] = new RegExp(pattern, 'g');
  }
}

// Quick detection patterns
export const QUICK_PATTERNS = {
  es2015: /(?:=>|`|\bclass\s|\bconst\s|\blet\s|\.\.\.)/,
  es2016: /\*\*/,
  es2017: /(?:\basync\s|\bawait\s)/,
  es2018: /(?:\.\.\..*\}|\bfor\s+await)/,
  es2019: /(?:\.flat\s*\(|\.flatMap\s*\()/,
  es2020: /(?:\?\.|\?\?|\bBigInt\b|Promise\.allSettled)/,
  es2021: /(?:\|\|=|&&=|\?\?=|\.replaceAll\s*\()/,
  es2022: /(?:\.at\s*\(|#[a-zA-Z_$]|\bstatic\s*\{|Object\.hasOwn)/
};

// Get minimum required ES version for detected features
export function getMinimumESVersion(detectedVersions) {
  const versionOrder = ES_VERSIONS;
  let minVersion = 'es5';
  
  for (const version of detectedVersions) {
    const versionIndex = versionOrder.indexOf(version);
    const minIndex = versionOrder.indexOf(minVersion);
    if (versionIndex > minIndex) {
      minVersion = version;
    }
  }
  
  return minVersion;
}

// Check if a version is supported by target
export function isVersionSupported(version, target) {
  const versionOrder = ES_VERSIONS;
  const versionIndex = versionOrder.indexOf(version);
  const targetIndex = versionOrder.indexOf(target);
  return versionIndex <= targetIndex;
}
